<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>osctools: Tools for the Organic Surface Chemistry group</title>
  <meta name="description" content="osctools: Tools for the Organic Surface Chemistry group">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="osctools: Tools for the Organic Surface Chemistry group" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://github.com/SPOMAN/oscbook" />
  
  
  <meta name="github-repo" content="spoman/oscbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="osctools: Tools for the Organic Surface Chemistry group" />
  
  
  

<meta name="author" content="Emil Tveden Bjerglund">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="raman-spectroscopy.html">
<link rel="next" href="saving-figures.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">osc tools</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting started</a><ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#what-is-r"><i class="fa fa-check"></i><b>1.1</b> What is R?</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#installing-r"><i class="fa fa-check"></i><b>1.2</b> Installing R</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#installing-the-osc-package"><i class="fa fa-check"></i><b>1.3</b> Installing the osc package</a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#getting-started-with-r"><i class="fa fa-check"></i><b>1.4</b> Getting started with R</a></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#analysis-in-an-r-notebook"><i class="fa fa-check"></i><b>1.5</b> Analysis in an R Notebook</a></li>
</ul></li>
<li class="part"><span><b>I Analytical methods</b></span></li>
<li class="chapter" data-level="2" data-path="electrochemical-methods.html"><a href="electrochemical-methods.html"><i class="fa fa-check"></i><b>2</b> Electrochemical methods</a><ul>
<li class="chapter" data-level="2.1" data-path="electrochemical-methods.html"><a href="electrochemical-methods.html#cyclic-voltammetry"><i class="fa fa-check"></i><b>2.1</b> Cyclic voltammetry</a></li>
<li class="chapter" data-level="2.2" data-path="electrochemical-methods.html"><a href="electrochemical-methods.html#electrolysis"><i class="fa fa-check"></i><b>2.2</b> Electrolysis</a></li>
<li class="chapter" data-level="2.3" data-path="electrochemical-methods.html"><a href="electrochemical-methods.html#loading-several-files"><i class="fa fa-check"></i><b>2.3</b> Loading several files</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="x-ray-photoelectron-spectroscopy-xps.html"><a href="x-ray-photoelectron-spectroscopy-xps.html"><i class="fa fa-check"></i><b>3</b> X-ray Photoelectron Spectroscopy (XPS)</a></li>
<li class="chapter" data-level="4" data-path="raman-spectroscopy.html"><a href="raman-spectroscopy.html"><i class="fa fa-check"></i><b>4</b> Raman spectroscopy</a></li>
<li class="part"><span><b>II Additional info</b></span></li>
<li class="chapter" data-level="5" data-path="interactive-analysis-tools.html"><a href="interactive-analysis-tools.html"><i class="fa fa-check"></i><b>5</b> Interactive analysis tools</a><ul>
<li class="chapter" data-level="5.1" data-path="interactive-analysis-tools.html"><a href="interactive-analysis-tools.html#peak-picking"><i class="fa fa-check"></i><b>5.1</b> Peak picking</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="saving-figures.html"><a href="saving-figures.html"><i class="fa fa-check"></i><b>6</b> Saving figures</a></li>
<li class="chapter" data-level="7" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>7</b> Github</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">osctools: Tools for the Organic Surface Chemistry group</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="interactive-analysis-tools" class="section level1">
<h1><span class="header-section-number">5</span> Interactive analysis tools</h1>
<div id="peak-picking" class="section level2">
<h2><span class="header-section-number">5.1</span> Peak picking</h2>
<p>As of <code>osctools</code> v0.0.2 a shinyGadget for peak-picking in any dataset was introduced. There are many algoritms for automatic peak detection in datasets, but they are usually difficult to generalise over e.g.Â many spectra. The <code>peak_picker()</code> shinyGadget displays a given dataset from a set of x- and y-coordinates and allows you to select peaks by clicking. It will automatically try to determine the nearest peak when selecting a point in the dataset (unless disabled by setting <code>find_nearest = FALSE</code>).</p>
<p>To demonstrate the functionality we have a Raman spectrum of a diazonium salt loaded in a tibble.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">print</span>(raman_spectrum, <span class="dt">n =</span> <span class="dv">5</span>)</code></pre></div>
<pre><code>## # A tibble: 1,015 x 2
##   wavenumber int_mean
##        &lt;dbl&gt;    &lt;dbl&gt;
## 1      193.7     40.5
## 2      195.1     41.4
## 3      196.6     34.7
## 4      198.1     34.0
## 5      199.5     31.3
## # ... with 1,010 more rows</code></pre>
<p>The <code>peak_picker()</code> can be launched from RStudio by supplying a tibble with data, and specifying the x- and y-columns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(osctools)

<span class="kw">peak_picker</span>(raman_spectrum, wavenumber, int_mean)</code></pre></div>
<video style="width:100%;" controls>
<source src="content/peak_picker.mp4" type="video/mp4">
</video>
<p>After pressing Done, the results will be output to the console. A piece of code is also shown, and is automatically copied to your clipboard. You should paste this into your code, in order to ensure reproducibility the next time you run the code.</p>
<pre><code>15 peaks found in the dataset
The add_peaks() function below has been copied to the clipboard!
Please paste it in your script for reproducibility.
    raman_spectrum &lt;- raman_spectrum %&gt;% add_peaks(c(177,215,233,316,349,410,448,470,528,598,644,749,843,902,967))</code></pre>
<p>Using the code output, it is easy to later reproduce the plot from the gadget using the <code>plot_peaks()</code> function. It returns a ggplot2 object, so we can easily add more layers to the plot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">raman_spectrum <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">add_peaks</span>(<span class="kw">c</span>(<span class="dv">177</span>,<span class="dv">215</span>,<span class="dv">233</span>,<span class="dv">316</span>,<span class="dv">349</span>,<span class="dv">410</span>,<span class="dv">448</span>,<span class="dv">470</span>,<span class="dv">528</span>,<span class="dv">598</span>,<span class="dv">644</span>,<span class="dv">749</span>,<span class="dv">843</span>,<span class="dv">902</span>,<span class="dv">967</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">plot_peaks</span>(wavenumber, int_mean) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="kw">expression</span>(<span class="kw">paste</span>(<span class="st">&quot;Wavenumber (&quot;</span>, cm<span class="op">^-</span><span class="dv">1</span>,<span class="st">&quot;)&quot;</span>)), <span class="dt">y =</span> <span class="st">&quot;Intensity (a.u.)&quot;</span>)</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="raman-spectroscopy.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="saving-figures.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
